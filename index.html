<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EndoDiagnóstico</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <style>
        /* Estilos gerais */
        :root {
            --primary-color: #1e88e5;
            --primary-dark: #1565c0;
            --primary-light: #64b5f6;
            --secondary-color: #26a69a;
            --text-color: #333;
            --light-text: #666;
            --background-color: #f5f5f5;
            --card-color: #fff;
            --border-color: #e0e0e0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', Arial, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .logo h1 {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        main {
            flex: 1;
            position: relative;
        }

        .screen {
            display: none;
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .welcome-content, .info-content, .step-content, .result-content {
            max-width: 800px;
            margin: 0 auto;
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--primary-dark);
            margin: 15px 0 10px;
            font-size: 1.4rem;
        }

        p {
            margin-bottom: 15px;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .primary-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .primary-btn:hover {
            background-color: var(--primary-dark);
        }

        .secondary-btn {
            background-color: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .secondary-btn:hover {
            background-color: #f0f7ff;
        }

        /* Estilos para a tela de informações */
        .info-content ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .info-content li {
            margin-bottom: 10px;
        }

        .credits {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            font-style: italic;
            color: var(--light-text);
        }

        /* Estilos para as opções de escolha */
        .options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }

        .option-card {
            background-color: #f9f9f9;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-card:hover {
            border-color: var(--primary-light);
            background-color: #f0f7ff;
        }

        .option-card.selected {
            border-color: var(--primary-color);
            background-color: #e3f2fd;
        }

        /* Estilos para a tela de sintomas */
        .symptoms-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .category {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }

        .symptoms-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .symptom-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        .symptom-item:hover {
            background-color: #f0f0f0;
        }

        .symptom-item input[type="checkbox"],
        .symptom-item input[type="radio"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .symptom-item label {
            cursor: pointer;
            flex: 1;
        }

        /* Estilos para os resultados */
        .result-card {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid var(--primary-color);
        }

        .result-section h3 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .result-section h3 i {
            margin-right: 10px;
        }

        .diagnosis-details, .treatment-details, .medication-details, .treatment-steps {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed var(--border-color);
        }

        .treatment-steps ol {
            margin-left: 20px;
        }

        .treatment-steps li {
            margin-bottom: 10px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: var(--light-text);
            font-size: 0.9rem;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .app-container {
                padding: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .logo h1 {
                font-size: 2rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
            
            .buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
            }
        }

        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Estilos para impressão */
        @media print {
            .app-container {
                padding: 0;
            }
            
            header, footer, .buttons, .progress-bar {
                display: none;
            }
            
            .screen {
                box-shadow: none;
                padding: 0;
            }
            
            .result-card {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <i class="fas fa-tooth"></i>
                <h1>EndoDiagnóstico</h1>
            </div>
            <div class="subtitle">
                Diagnóstico e Conduta em Endodontia
            </div>
        </header>

        <div class="progress-bar">
            <div class="progress" id="progress-bar"></div>
        </div>

        <main>
            <!-- Tela de Boas-vindas -->
            <section id="welcome-screen" class="screen active">
                <div class="welcome-content">
                    <h2>Bem-vindo ao EndoDiagnóstico</h2>
                    <p>Um aplicativo interativo para auxiliar estudantes de odontologia no diagnóstico e tratamento endodôntico.</p>
                    <p>Baseado nas diretrizes da SBEndo e no fluxo de trabalho EndoE.</p>
                    
                    <div class="buttons">
                        <button class="primary-btn" onclick="showScreen('step1-screen')">Iniciar Diagnóstico</button>
                        <button class="secondary-btn" onclick="showScreen('info-screen')">Informações</button>
                    </div>
                </div>
            </section>

            <!-- Tela de Informações -->
            <section id="info-screen" class="screen">
                <div class="info-content">
                    <h2>Sobre o EndoDiagnóstico</h2>
                    <p>O EndoDiagnóstico é uma ferramenta educacional para auxiliar no diagnóstico e tratamento endodôntico, seguindo as diretrizes da Sociedade Brasileira de Endodontia (SBEndo).</p>
                    
                    <h3>Como utilizar:</h3>
                    <ol>
                        <li>Preencha os dados do paciente e do dente a ser avaliado</li>
                        <li>Responda às perguntas sobre sintomas e sinais clínicos</li>
                        <li>Informe os resultados dos testes diagnósticos</li>
                        <li>Analise os achados radiográficos</li>
                        <li>Receba o diagnóstico pulpar e periapical</li>
                        <li>Obtenha recomendações de tratamento e medicação intracanal</li>
                    </ol>
                    
                    <h3>Classificação Diagnóstica:</h3>
                    <p>O aplicativo utiliza a classificação da SBEndo para diagnósticos pulpares e periapicais:</p>
                    <p><strong>Diagnósticos Pulpares:</strong> Polpa Viva Normal, Pulpite Reversível, Pulpite Irreversível Sintomática, Pulpite Irreversível Assintomática, Necrose Pulpar</p>
                    <p><strong>Diagnósticos Periapicais:</strong> Periodonto Normal, Periodontite Apical Sintomática, Periodontite Apical Assintomática, Abscesso Apical Agudo, Abscesso Apical Crônico</p>
                    
                    <div class="credits">
                        <p>Desenvolvido por Rodrigo Nobre</p>
                        <p>Baseado nas diretrizes da Sociedade Brasileira de Endodontia</p>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('welcome-screen')">Voltar</button>
                        <button class="primary-btn" onclick="showScreen('step1-screen')">Iniciar Diagnóstico</button>
                    </div>
                </div>
            </section>

            <!-- Etapa 1: Dados do Paciente -->
            <section id="step1-screen" class="screen">
                <div class="step-content">
                    <h2>Dados do Paciente</h2>
                    <div class="category">
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <label for="nome">Nome do Paciente:</label>
                                <input type="text" id="nome" class="form-control" style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                            </div>
                            <div class="symptom-item">
                                <label for="idade">Idade:</label>
                                <input type="number" id="idade" class="form-control" style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                            </div>
                            <div class="symptom-item">
                                <label for="dente">Dente (número):</label>
                                <input type="text" id="dente" class="form-control" style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                            </div>
                            <div class="symptom-item">
                                <label for="lesao_carie">Lesão de Cárie:</label>
                                <select id="lesao_carie" class="form-control" style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                                    <option value="ausente">Ausente</option>
                                    <option value="rasa">Rasa</option>
                                    <option value="media">Média</option>
                                    <option value="profunda">Profunda</option>
                                    <option value="atingiu_polpa">Atingiu a polpa</option>
                                </select>
                            </div>
                            <div class="symptom-item">
                                <label for="remanescente">Qualidade do Remanescente:</label>
                                <select id="remanescente" class="form-control" style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color);">
                                    <option value="otimo">Ótimo</option>
                                    <option value="bom">Bom</option>
                                    <option value="regular">Regular</option>
                                    <option value="ruim">Ruim</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('welcome-screen')">Voltar</button>
                        <button class="primary-btn" onclick="showScreen('step2-screen')">Próximo</button>
                    </div>
                </div>
            </section>

            <!-- Etapa 2: Histórico de Dor -->
            <section id="step2-screen" class="screen">
                <div class="step-content">
                    <h2>Histórico de Dor</h2>
                    
                    <div class="category">
                        <h3>Presença e Características da Dor</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="dor-sim" name="presenca_dor" value="sim">
                                <label for="dor-sim">Presença de dor</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="dor-nao" name="presenca_dor" value="nao">
                                <label for="dor-nao">Ausência de dor</label>
                            </div>
                            <div class="symptom-item" id="escala-dor-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Escala de dor (0-10):</p>
                                <div style="display: flex; align-items: center;">
                                    <input type="range" id="escala-dor" name="escala_dor" min="0" max="10" value="5" style="flex: 1; margin-right: 10px;">
                                    <span id="escala-dor-valor">5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="category dor-details" id="dor-details">
                        <h3>Características da Dor</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="dor-espontanea-sim" name="dor_espontanea" value="sim">
                                <label for="dor-espontanea-sim">Dor espontânea</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="dor-espontanea-nao" name="dor_espontanea" value="nao">
                                <label for="dor-espontanea-nao">Dor provocada (não espontânea)</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="radio" id="duracao-momentanea" name="duracao_dor" value="momentanea">
                                <label for="duracao-momentanea">Duração momentânea (cessa após remoção do estímulo)</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="duracao-prolongada" name="duracao_dor" value="prolongada">
                                <label for="duracao-prolongada">Duração prolongada (persiste após remoção do estímulo)</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="checkbox" id="dor-mastigacao" name="dor_mastigacao" value="sim">
                                <label for="dor-mastigacao">Dor à mastigação</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="dor-noturna" name="dor_noturna" value="sim">
                                <label for="dor-noturna">Dor noturna</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="dor-irradiada" name="dor_irradiada" value="sim">
                                <label for="dor-irradiada">Dor irradiada</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="dente-extruido" name="dente_extruido" value="sim">
                                <label for="dente-extruido">Sensação de dente extruído (dente "mais alto")</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('step1-screen')">Voltar</button>
                        <button class="primary-btn" onclick="showScreen('step3-screen')">Próximo</button>
                    </div>
                </div>
            </section>

            <!-- Etapa 3: Testes Clínicos -->
            <section id="step3-screen" class="screen">
                <div class="step-content">
                    <h2>Testes Clínicos</h2>
                    
                    <div class="category">
                        <h3>Testes Térmicos</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="frio-positivo" name="teste_frio" value="positivo">
                                <label for="frio-positivo">Teste ao frio: Positivo</label>
                            </div>
                            <div class="symptom-item" id="intensidade-frio-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Intensidade da resposta:</p>
                                <div style="display: flex; gap: 15px;">
                                    <div>
                                        <input type="radio" id="intensidade-frio-1" name="intensidade_frio" value="+">
                                        <label for="intensidade-frio-1">+</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-frio-2" name="intensidade_frio" value="++">
                                        <label for="intensidade-frio-2">++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-frio-3" name="intensidade_frio" value="+++">
                                        <label for="intensidade-frio-3">+++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-frio-4" name="intensidade_frio" value="++++">
                                        <label for="intensidade-frio-4">++++</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item" id="declinio-frio-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Declínio da dor após teste ao frio:</p>
                                <div style="display: flex; gap: 20px;">
                                    <div>
                                        <input type="radio" id="declinio-frio-rapido" name="declinio_frio" value="rapido">
                                        <label for="declinio-frio-rapido">Declínio rápido</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="declinio-frio-lento" name="declinio_frio" value="lento">
                                        <label for="declinio-frio-lento">Declínio lento</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="declinio-frio-diminui" name="declinio_frio" value="diminui">
                                        <label for="declinio-frio-diminui">Diminui a dor</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="frio-negativo" name="teste_frio" value="negativo">
                                <label for="frio-negativo">Teste ao frio: Negativo</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="frio-nao-realizado" name="teste_frio" value="nao_realizado">
                                <label for="frio-nao-realizado">Teste ao frio: Não realizado</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="radio" id="calor-positivo" name="teste_calor" value="positivo">
                                <label for="calor-positivo">Teste ao calor: Positivo</label>
                            </div>
                            <div class="symptom-item" id="intensidade-calor-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Intensidade da resposta:</p>
                                <div style="display: flex; gap: 15px;">
                                    <div>
                                        <input type="radio" id="intensidade-calor-1" name="intensidade_calor" value="+">
                                        <label for="intensidade-calor-1">+</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-calor-2" name="intensidade_calor" value="++">
                                        <label for="intensidade-calor-2">++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-calor-3" name="intensidade_calor" value="+++">
                                        <label for="intensidade-calor-3">+++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-calor-4" name="intensidade_calor" value="++++">
                                        <label for="intensidade-calor-4">++++</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item" id="declinio-calor-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Declínio da dor após teste ao calor:</p>
                                <div style="display: flex; gap: 20px;">
                                    <div>
                                        <input type="radio" id="declinio-calor-rapido" name="declinio_calor" value="rapido">
                                        <label for="declinio-calor-rapido">Declínio rápido</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="declinio-calor-lento" name="declinio_calor" value="lento">
                                        <label for="declinio-calor-lento">Declínio lento</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="declinio-calor-diminui" name="declinio_calor" value="diminui">
                                        <label for="declinio-calor-diminui">Diminui a dor</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="calor-negativo" name="teste_calor" value="negativo">
                                <label for="calor-negativo">Teste ao calor: Negativo</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="calor-nao-realizado" name="teste_calor" value="nao_realizado">
                                <label for="calor-nao-realizado">Teste ao calor: Não realizado</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="category">
                        <h3>Testes de Percussão</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="percussao-vertical-positivo" name="percussao_vertical" value="positivo">
                                <label for="percussao-vertical-positivo">Percussão vertical: Positivo (sensível)</label>
                            </div>
                            <div class="symptom-item" id="intensidade-percussao-vertical-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Intensidade da resposta:</p>
                                <div style="display: flex; gap: 15px;">
                                    <div>
                                        <input type="radio" id="intensidade-percussao-vertical-1" name="intensidade_percussao_vertical" value="+">
                                        <label for="intensidade-percussao-vertical-1">+</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-vertical-2" name="intensidade_percussao_vertical" value="++">
                                        <label for="intensidade-percussao-vertical-2">++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-vertical-3" name="intensidade_percussao_vertical" value="+++">
                                        <label for="intensidade-percussao-vertical-3">+++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-vertical-4" name="intensidade_percussao_vertical" value="++++">
                                        <label for="intensidade-percussao-vertical-4">++++</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="percussao-vertical-negativo" name="percussao_vertical" value="negativo">
                                <label for="percussao-vertical-negativo">Percussão vertical: Negativo (normal)</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="radio" id="percussao-horizontal-positivo" name="percussao_horizontal" value="positivo">
                                <label for="percussao-horizontal-positivo">Percussão horizontal: Positivo (sensível)</label>
                            </div>
                            <div class="symptom-item" id="intensidade-percussao-horizontal-container" style="display: none; margin-left: 20px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                                <p style="margin-bottom: 10px; font-weight: 500;">Intensidade da resposta:</p>
                                <div style="display: flex; gap: 15px;">
                                    <div>
                                        <input type="radio" id="intensidade-percussao-horizontal-1" name="intensidade_percussao_horizontal" value="+">
                                        <label for="intensidade-percussao-horizontal-1">+</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-horizontal-2" name="intensidade_percussao_horizontal" value="++">
                                        <label for="intensidade-percussao-horizontal-2">++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-horizontal-3" name="intensidade_percussao_horizontal" value="+++">
                                        <label for="intensidade-percussao-horizontal-3">+++</label>
                                    </div>
                                    <div>
                                        <input type="radio" id="intensidade-percussao-horizontal-4" name="intensidade_percussao_horizontal" value="++++">
                                        <label for="intensidade-percussao-horizontal-4">++++</label>
                                    </div>
                                </div>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="percussao-horizontal-negativo" name="percussao_horizontal" value="negativo">
                                <label for="percussao-horizontal-negativo">Percussão horizontal: Negativo (normal)</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('step2-screen')">Voltar</button>
                        <button class="primary-btn" onclick="showScreen('step4-screen')">Próximo</button>
                    </div>
                </div>
            </section>

            <!-- Etapa 4: Exame Radiográfico e Outros Dados -->
            <section id="step4-screen" class="screen">
                <div class="step-content">
                    <h2>Exame Radiográfico e Outros Dados</h2>
                    
                    <div class="category">
                        <h3>Achados Radiográficos</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="lesao-ausente" name="lesao_periapical" value="ausente">
                                <label for="lesao-ausente">Lesão periapical: Ausente</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="lesao-difusa" name="lesao_periapical" value="difusa">
                                <label for="lesao-difusa">Lesão periapical: Difusa</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="lesao-circunscrita" name="lesao_periapical" value="circunscrita">
                                <label for="lesao-circunscrita">Lesão periapical: Circunscrita</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="radio" id="espessamento-sim" name="espessamento_ligamento" value="sim">
                                <label for="espessamento-sim">Espessamento do ligamento periodontal: Presente</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="espessamento-nao" name="espessamento_ligamento" value="nao">
                                <label for="espessamento-nao">Espessamento do ligamento periodontal: Ausente</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="lamina-dura-rompida" name="lamina_dura" value="rompida">
                                <label for="lamina-dura-rompida">Lâmina dura: Rompida</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="lamina-dura-integra" name="lamina_dura" value="integra">
                                <label for="lamina-dura-integra">Lâmina dura: Íntegra</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="category">
                        <h3>Sinais Clínicos Adicionais</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="radio" id="fistula-sim" name="fistula" value="sim">
                                <label for="fistula-sim">Presença de fístula</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="fistula-nao" name="fistula" value="nao">
                                <label for="fistula-nao">Ausência de fístula</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="radio" id="edema-sim" name="edema" value="sim">
                                <label for="edema-sim">Presença de edema</label>
                            </div>
                            <div class="symptom-item">
                                <input type="radio" id="edema-nao" name="edema" value="nao">
                                <label for="edema-nao">Ausência de edema</label>
                            </div>
                            
                            <div class="symptom-item">
                                <input type="checkbox" id="sinal-febre" name="sinal_febre" value="sim">
                                <label for="sinal-febre">Febre</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="sinal-malestar" name="sinal_malestar" value="sim">
                                <label for="sinal-malestar">Mal-estar</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="category">
                        <h3>Histórico</h3>
                        <div class="symptoms-list">
                            <div class="symptom-item">
                                <input type="checkbox" id="trauma" name="trauma" value="sim">
                                <label for="trauma">Histórico de trauma</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="tratamento-anterior" name="tratamento_anterior" value="sim">
                                <label for="tratamento-anterior">Tratamento restaurador anterior</label>
                            </div>
                            <div class="symptom-item">
                                <input type="checkbox" id="tratamento-endo-previo" name="tratamento_endo_previo" value="sim">
                                <label for="tratamento-endo-previo">Tratamento endodôntico prévio</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('step3-screen')">Voltar</button>
                        <button class="primary-btn" onclick="gerarDiagnostico()">Gerar Diagnóstico</button>
                    </div>
                </div>
            </section>

            <!-- Tela de Resultados -->
            <section id="result-screen" class="screen">
                <div class="result-content">
                    <h2>Resultado do Diagnóstico</h2>
                    
                    <div class="result-card" id="dados-paciente-card">
                        <div class="result-section">
                            <h3><i class="fas fa-user"></i> Dados do Paciente</h3>
                            <div id="dados-paciente" class="diagnosis-details"></div>
                        </div>
                    </div>
                    
                    <div class="result-card" id="diagnostico-pulpar-card">
                        <div class="result-section">
                            <h3><i class="fas fa-heartbeat"></i> Diagnóstico Pulpar</h3>
                            <div id="diagnostico-pulpar" class="diagnosis-details"></div>
                        </div>
                    </div>
                    
                    <div class="result-card" id="diagnostico-periapical-card">
                        <div class="result-section">
                            <h3><i class="fas fa-tooth"></i> Diagnóstico Periapical</h3>
                            <div id="diagnostico-periapical" class="diagnosis-details"></div>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-section">
                            <h3><i class="fas fa-clipboard-list"></i> Recomendações de Tratamento</h3>
                            <div id="recomendacoes" class="treatment-details"></div>
                        </div>
                    </div>
                    
                    <div class="result-card" id="medicacao-intracanal-card" style="display: none;">
                        <div class="result-section">
                            <h3><i class="fas fa-prescription-bottle-alt"></i> Medicação Intracanal (MIC)</h3>
                            <div id="medicacao-intracanal" class="medication-details"></div>
                        </div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-section">
                            <h3><i class="fas fa-procedures"></i> Passo a Passo do Tratamento</h3>
                            <div id="passos-tratamento" class="treatment-steps"></div>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button class="secondary-btn" onclick="showScreen('step4-screen')">Voltar</button>
                        <button class="primary-btn" onclick="imprimirResultados()">Imprimir</button>
                        <button class="primary-btn" onclick="showScreen('welcome-screen')">Novo Diagnóstico</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>EndoDiagnóstico - Desenvolvido por Rodrigo Nobre</p>
            <p>&copy; 2025 - Baseado nas diretrizes da Sociedade Brasileira de Endodontia</p>
        </footer>
    </div>

    <script>
        // Definições de diagnóstico baseadas na SBEndo
        const DIAGNOSTICOS_PULPARES = {
            "polpa_viva_normal": "Polpa Viva Normal",
            "pulpite_reversivel": "Pulpite Reversível",
            "pulpite_irreversivel_sintomatica": "Pulpite Irreversível Sintomática",
            "pulpite_irreversivel_assintomatica": "Pulpite Irreversível Assintomática",
            "necrose_pulpar": "Necrose Pulpar"
        };

        const DIAGNOSTICOS_PERIAPICAIS = {
            "normal": "Periodonto Normal",
            "periodontite_apical_sintomatica": "Periodontite Apical Sintomática",
            "periodontite_apical_assintomatica": "Periodontite Apical Assintomática",
            "abscesso_apical_agudo": "Abscesso Apical Agudo",
            "abscesso_apical_cronico": "Abscesso Apical Crônico"
        };
        
        // Informações sobre Medicação Intracanal (MIC)
        const MEDICACAO_INTRACANAL = {
            "polpa_viva": {
                "titulo": "Medicação Intracanal para Polpa Viva (Pulpectomia)",
                "descricao": "Em casos de polpa viva tratados em múltiplas sessões, a medicação intracanal é obrigatória para prevenir a contaminação do canal entre as sessões.",
                "medicacoes": [
                    {
                        "nome": "Hidróxido de Cálcio (Ca(OH)₂)",
                        "indicacao": "Quando foi possível realizar o alargamento mínimo do canal (pelo menos lima #25).",
                        "modo_uso": "Inserção com seringa tipo UltraCal/Calen ou com Lentulo/McSpadden para pastas manipuladas.",
                        "tempo": "Mínimo de 7 dias para efeito antimicrobiano significativo.",
                        "observacoes": "Veículos aquosos (UltraCal) têm duração de até 10 dias, enquanto veículos viscosos (Calen) duram até 30 dias."
                    },
                    {
                        "nome": "NDP (PRP + Dexametasona)",
                        "indicacao": "Quando NÃO foi possível realizar o alargamento mínimo do canal (menos que lima #25).",
                        "modo_uso": "Inserção com seringa carpule e agulha 30G curta, calibrada 2mm aquém do CRT.",
                        "tempo": "Ação efetiva por no máximo 3 dias.",
                        "observacoes": "A dexametasona proporciona efeito anti-inflamatório potente, reduzindo a dor pós-operatória."
                    }
                ],
                "tecnica_aplicacao": "1. Irrigação final\n2. Secagem com cânulas e cones de papel\n3. Inserção da medicação\n4. Selamento provisório com bolinha de algodão e material restaurador"
            },
            "polpa_morta": {
                "titulo": "Medicação Intracanal para Polpa Morta/Necrosada (Penetração Desinfetante)",
                "descricao": "Em casos de necrose pulpar, o tratamento é sempre realizado em múltiplas sessões, e a medicação intracanal é sempre obrigatória para auxiliar na desinfecção progressiva do canal.",
                "medicacoes": [
                    {
                        "nome": "Hidróxido de Cálcio (Ca(OH)₂)",
                        "indicacao": "Quando foi possível realizar o alargamento mínimo do canal (pelo menos lima #25).",
                        "modo_uso": "Inserção com seringa tipo UltraCal/Calen ou com Lentulo/McSpadden para pastas manipuladas.",
                        "tempo": "Mínimo de 7 dias para efeito antimicrobiano significativo.",
                        "observacoes": "pH elevado (12,8) proporciona potente ação antimicrobiana e inativa o LPS bacteriano."
                    },
                    {
                        "nome": "PRP (Paramonoclorofenol + Polietilenoglicol + Rinossoro)",
                        "indicacao": "Quando NÃO foi possível realizar o alargamento mínimo do canal (menos que lima #25).",
                        "modo_uso": "Inserção com seringa carpule e agulha 30G curta, calibrada 2mm aquém do CRT.",
                        "tempo": "Ação efetiva por no máximo 3 dias.",
                        "observacoes": "O PMC é citotóxico, por isso deve ser usado com protetor (Rinossoro)."
                    }
                ],
                "tecnica_aplicacao": "1. Irrigação final\n2. Secagem com cânulas e cones de papel\n3. Inserção da medicação\n4. Selamento provisório com bolinha de algodão e material restaurador"
            }
        };

        // Variáveis para controle de navegação
        let currentScreen = 'welcome-screen';
        const totalSteps = 4;
        
        // Função para mostrar uma tela específica
        function showScreen(screenId) {
            document.getElementById(currentScreen).classList.remove('active');
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            // Atualizar barra de progresso
            updateProgressBar(screenId);
            
            // Configurações específicas para cada tela
            if (screenId === 'step2-screen') {
                document.getElementById('dor-details').style.display = 'none';
            }
        }
        
        // Função para atualizar a barra de progresso
        function updateProgressBar(screenId) {
            const progressBar = document.getElementById('progress-bar');
            
            if (screenId === 'welcome-screen' || screenId === 'info-screen') {
                progressBar.style.width = '0%';
            } else if (screenId === 'result-screen') {
                progressBar.style.width = '100%';
            } else {
                const step = parseInt(screenId.split('-')[1].charAt(0));
                const progress = (step / totalSteps) * 100;
                progressBar.style.width = progress + '%';
            }
        }
        
        // Função para formatar o resultado do teste térmico
        function formatarTesteTérmico(valor) {
            switch(valor) {
                case 'positivo':
                    return 'Positivo';
                case 'negativo':
                    return 'Negativo';
                case 'nao_realizado':
                    return 'Não realizado';
                default:
                    return valor;
            }
        }
        
        // Função para formatar o resultado da lesão periapical
        function formatarLesaoPeriapical(valor) {
            switch(valor) {
                case 'ausente':
                    return 'Ausente';
                case 'difusa':
                    return 'Difusa';
                case 'circunscrita':
                    return 'Circunscrita';
                default:
                    return valor;
            }
        }
        
        // Função para coletar os dados do formulário
        function coletarDados() {
            const dados = {
                // Dados do paciente
                nome: document.getElementById('nome').value,
                idade: document.getElementById('idade').value,
                dente: document.getElementById('dente').value,
                lesao_carie: document.getElementById('lesao_carie').value,
                remanescente: document.getElementById('remanescente').value,
                
                // Histórico de dor
                presenca_dor: document.querySelector('input[name="presenca_dor"]:checked')?.value,
                escala_dor: document.getElementById('escala-dor').value,
                dor_espontanea: document.querySelector('input[name="dor_espontanea"]:checked')?.value,
                duracao_dor: document.querySelector('input[name="duracao_dor"]:checked')?.value,
                dor_mastigacao: document.getElementById('dor-mastigacao').checked ? 'sim' : 'nao',
                dor_noturna: document.getElementById('dor-noturna').checked ? 'sim' : 'nao',
                dor_irradiada: document.getElementById('dor-irradiada').checked ? 'sim' : 'nao',
                dente_extruido: document.getElementById('dente-extruido').checked ? 'sim' : 'nao',
                
                // Testes clínicos
                teste_frio: document.querySelector('input[name="teste_frio"]:checked')?.value,
                intensidade_frio: document.querySelector('input[name="intensidade_frio"]:checked')?.value,
                declinio_frio: document.querySelector('input[name="declinio_frio"]:checked')?.value,
                teste_calor: document.querySelector('input[name="teste_calor"]:checked')?.value,
                intensidade_calor: document.querySelector('input[name="intensidade_calor"]:checked')?.value,
                declinio_calor: document.querySelector('input[name="declinio_calor"]:checked')?.value,
                percussao_vertical: document.querySelector('input[name="percussao_vertical"]:checked')?.value,
                intensidade_percussao_vertical: document.querySelector('input[name="intensidade_percussao_vertical"]:checked')?.value,
                percussao_horizontal: document.querySelector('input[name="percussao_horizontal"]:checked')?.value,
                intensidade_percussao_horizontal: document.querySelector('input[name="intensidade_percussao_horizontal"]:checked')?.value,
                
                // Achados radiográficos e outros dados
                lesao_periapical: document.querySelector('input[name="lesao_periapical"]:checked')?.value,
                espessamento_ligamento: document.querySelector('input[name="espessamento_ligamento"]:checked')?.value,
                lamina_dura: document.querySelector('input[name="lamina_dura"]:checked')?.value,
                fistula: document.querySelector('input[name="fistula"]:checked')?.value,
                edema: document.querySelector('input[name="edema"]:checked')?.value,
                sinal_febre: document.getElementById('sinal-febre').checked ? 'sim' : 'nao',
                sinal_malestar: document.getElementById('sinal-malestar').checked ? 'sim' : 'nao',
                trauma: document.getElementById('trauma').checked ? 'sim' : 'nao',
                tratamento_anterior: document.getElementById('tratamento-anterior').checked ? 'sim' : 'nao',
                tratamento_endo_previo: document.getElementById('tratamento-endo-previo').checked ? 'sim' : 'nao'
            };
            
            return dados;
        }
        
        // Função para determinar o diagnóstico pulpar
        function determinarDiagnosticoPulpar(dados) {
            const { presenca_dor, dor_espontanea, duracao_dor, teste_frio, teste_calor, declinioFrio } = dados;
            
            // Verificar necrose pulpar
            if (teste_frio === 'negativo' && (teste_calor === 'negativo' || teste_calor === 'nao_realizado')) {
                return DIAGNOSTICOS_PULPARES["necrose_pulpar"];
            }
            
            // Verificar pulpite irreversível sintomática
            if (presenca_dor === 'sim' && dor_espontanea === 'sim' && duracao_dor === 'prolongada') {
                return DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"];
            }
            
            // Verificar pulpite irreversível assintomática
            if ((presenca_dor === 'nao' || dor_espontanea === 'nao') && 
                teste_frio === 'positivo_exacerbado' && 
                duracao_dor === 'prolongada') {
                return DIAGNOSTICOS_PULPARES["pulpite_irreversivel_assintomatica"];
            }
            
            // Verificar pulpite reversível
            if (presenca_dor === 'sim' && dor_espontanea === 'nao' && 
                testeFrio === 'positivo_exacerbado' && duracaoDor === 'momentanea') {
                return DIAGNOSTICOS_PULPARES["pulpite_reversivel"];
            }
            
            // Se nenhuma condição acima for atendida e os testes térmicos forem normais
            if (teste_frio === 'positivo_normal' && (teste_calor === 'positivo_normal' || teste_calor === 'nao_realizado')) {
                return DIAGNOSTICOS_PULPARES["polpa_viva_normal"];
            }
            
            // Caso não seja possível determinar com precisão
            // Avaliar mais critérios para refinar o diagnóstico
            if (presenca_dor === 'sim' && teste_frio === 'positivo_exacerbado') {
                // Se tiver informação sobre declínio, usar para refinar diagnóstico
                if (declinioFrio === 'rapido') {
                    return DIAGNOSTICOS_PULPARES["pulpite_reversivel"];
                } else if (declinioFrio === 'lento') {
                    return DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"];
                } else {
                    return DIAGNOSTICOS_PULPARES["pulpite_reversivel"];
                }
            } else if (presenca_dor === 'sim' && dor_espontanea === 'sim') {
                return DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"];
            } else if (teste_frio === 'negativo') {
                return DIAGNOSTICOS_PULPARES["necrose_pulpar"];
            } else {
                return DIAGNOSTICOS_PULPARES["polpa_viva_normal"];
            }
        }
        
        function determinarDiagnosticoPeriapical(dados) {
            // Verificar presença de fístula (indicativo de abscesso apical crônico)
            if (dados.fistula === 'sim') {
                return DIAGNOSTICOS_PERIAPICAIS["abscesso_apical_cronico"];
            }
            
            // Verificar sinais de abscesso apical agudo
            if (dados.edema === 'sim' && 
                dados.percussao_vertical === 'positivo' &&
                (dados.sinal_febre === 'sim' || dados.sinal_malestar === 'sim')) {
                return DIAGNOSTICOS_PERIAPICAIS["abscesso_apical_agudo"];
            }
            
            // Verificar periodontite apical sintomática
            if (dados.percussao_vertical === 'positivo' || 
                dados.percussao_horizontal === 'positivo' ||
                dados.dor_mastigacao === 'sim' ||
                dados.dente_extruido === 'sim') {
                return DIAGNOSTICOS_PERIAPICAIS["periodontite_apical_sintomatica"];
            }
            
            // Verificar periodontite apical assintomática
            if (dados.lesao_periapical === 'difusa' || 
                dados.lesao_periapical === 'circunscrita') {
                return DIAGNOSTICOS_PERIAPICAIS["periodontite_apical_assintomatica"];
            }
            
            // Se não houver sinais de alteração periapical
            if (dados.percussao_vertical === 'negativo' &&
                dados.percussao_horizontal === 'negativo' &&
                dados.lesao_periapical === 'ausente') {
                return DIAGNOSTICOS_PERIAPICAIS["normal"];
            }
            
            // Caso não seja possível determinar com precisão
            // Verificar mais critérios para refinar o diagnóstico
            if (dados.espessamento_ligamento === 'sim') {
                return DIAGNOSTICOS_PERIAPICAIS["periodontite_apical_assintomatica"];
            } else {
                return DIAGNOSTICOS_PERIAPICAIS["normal"];
            }
        }
        
        function gerarRecomendacoesTratamento(diagnosticoPulpar, diagnosticoPeriapical, dados) {
            const recomendacoes = [];
            
            // Recomendações baseadas no diagnóstico pulpar
            if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["polpa_viva_normal"]) {
                recomendacoes.push("Não há necessidade de tratamento endodôntico.");
                recomendacoes.push("Monitorar e reavaliar periodicamente.");
                
            } else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_reversivel"]) {
                recomendacoes.push("Remoção do estímulo irritante (cárie, restauração defeituosa).");
                recomendacoes.push("Proteção pulpar indireta ou direta, dependendo da proximidade com a polpa.");
                recomendacoes.push("Restauração definitiva.");
                recomendacoes.push("Controle e acompanhamento.");
                
            } else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"]) {
                recomendacoes.push("Pulpectomia (remoção completa da polpa).");
                recomendacoes.push("PQC (Preparo Químico-Cirúrgico) dos canais.");
                recomendacoes.push("Medicação intracanal: Hidróxido de Cálcio.");
                recomendacoes.push("Prescrição de analgésicos para controle da dor.");
                recomendacoes.push("Obturação na próxima sessão após remissão dos sintomas.");
                recomendacoes.push("Restauração definitiva.");
                
            } else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_assintomatica"]) {
                recomendacoes.push("Pulpectomia (remoção completa da polpa).");
                recomendacoes.push("PQC (Preparo Químico-Cirúrgico) dos canais.");
                recomendacoes.push("Possibilidade de tratamento em sessão única.");
                recomendacoes.push("Obturação dos canais.");
                recomendacoes.push("Restauração definitiva.");
                
            } else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                recomendacoes.push("Penetração desinfetante.");
                recomendacoes.push("PQC (Preparo Químico-Cirúrgico) dos canais.");
                recomendacoes.push("Medicação intracanal: Hidróxido de Cálcio (Ca(OH)₂).");
                recomendacoes.push("Tratamento em múltiplas sessões.");
                recomendacoes.push("Obturação após confirmação de ausência de sintomas.");
                recomendacoes.push("Restauração definitiva.");
                
            } else if (diagnosticoPulpar === "Dente Tratado Endodonticamente") {
                recomendacoes.push("Avaliar qualidade do tratamento endodôntico prévio.");
                recomendacoes.push("Considerar retratamento se houver sinais de falha.");
            }
            
            // Recomendações adicionais baseadas no diagnóstico periapical
            if (diagnosticoPeriapical === DIAGNOSTICOS_PERIAPICAIS["periodontite_apical_sintomatica"]) {
                recomendacoes.push("Alívio oclusal.");
                recomendacoes.push("Prescrição de analgésicos e/ou anti-inflamatórios.");
                
            } else if (diagnosticoPeriapical === DIAGNOSTICOS_PERIAPICAIS["abscesso_apical_agudo"]) {
                recomendacoes.push("Drenagem (se possível).");
                recomendacoes.push("Prescrição de antibióticos (Amoxicilina 500mg, 8/8h por 7 dias).");
                recomendacoes.push("Prescrição de analgésicos e anti-inflamatórios.");
                
            } else if (diagnosticoPeriapical === DIAGNOSTICOS_PERIAPICAIS["abscesso_apical_cronico"]) {
                recomendacoes.push("Monitoramento da regressão da fístula após o tratamento endodôntico.");
            }
            
            // Recomendações específicas para medicação intracanal
            if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                recomendacoes.push("Irrigação abundante com Hipoclorito de Sódio (NaOCl) a 2,5%.");
                recomendacoes.push("EDTA 17% para remoção da smear layer antes da medicação intracanal.");
            }
            
            return recomendacoes;
        }
        
        function gerarPassosTratamento(diagnosticoPulpar, diagnosticoPeriapical) {
            const passos = [];
            
            // Passos comuns para tratamentos endodônticos
            if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"] || 
                diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_assintomatica"] ||
                diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                
                passos.push({
                    titulo: "Acesso Coronário",
                    descricao: "Remoção de tecido cariado, abertura coronária com brocas apropriadas, remoção do teto da câmara pulpar e localização das entradas dos canais."
                });
                
                passos.push({
                    titulo: "Odontometria",
                    descricao: "Determinação do comprimento de trabalho através de:\n- Método convencional: Lima endodôntica e radiografia periapical\n- Método eletrônico: Localizador apical eletrônico"
                });
                
                passos.push({
                    titulo: "PQC (Preparo Químico-Cirúrgico)",
                    descricao: "Instrumentação dos canais (manual ou mecanizada) e irrigação abundante com soluções apropriadas."
                });
                
                // Passos específicos para necrose
                if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                    passos.push({
                        titulo: "Medicação Intracanal",
                        descricao: "Aplicação de Hidróxido de Cálcio como medicação intracanal por 7-14 dias."
                    });
                    
                    passos.push({
                        titulo: "Segunda Sessão",
                        descricao: "Remoção da medicação intracanal, nova irrigação e verificação da ausência de sintomas."
                    });
                }
                
                passos.push({
                    titulo: "Obturação dos Canais",
                    descricao: "Secagem dos canais, seleção do cone principal, prova radiográfica, aplicação de cimento endodôntico e técnica de obturação (condensação lateral ou termoplastificada)."
                });
                
                passos.push({
                    titulo: "Restauração Provisória",
                    descricao: "Selamento da cavidade de acesso com material restaurador provisório."
                });
                
                passos.push({
                    titulo: "Restauração Definitiva",
                    descricao: "Encaminhamento para restauração definitiva o mais breve possível após a conclusão do tratamento endodôntico."
                });
                
                passos.push({
                    titulo: "Controle",
                    descricao: "Acompanhamento radiográfico periódico para verificar o sucesso do tratamento."
                });
            }
            
            // Passos para pulpite reversível
            else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_reversivel"]) {
                passos.push({
                    titulo: "Remoção do Estímulo",
                    descricao: "Remoção de cárie ou restauração defeituosa que esteja causando a irritação pulpar."
                });
                
                passos.push({
                    titulo: "Proteção Pulpar",
                    descricao: "Aplicação de material de proteção pulpar indireta (cimento de hidróxido de cálcio) se necessário."
                });
                
                passos.push({
                    titulo: "Restauração Definitiva",
                    descricao: "Restauração com material definitivo para selar e proteger o dente."
                });
                
                passos.push({
                    titulo: "Controle",
                    descricao: "Acompanhamento para verificar a remissão dos sintomas e a manutenção da vitalidade pulpar."
                });
            }
            
            // Passos adicionais para abscesso apical agudo
            if (diagnosticoPeriapical === DIAGNOSTICOS_PERIAPICAIS["abscesso_apical_agudo"]) {
                passos.unshift({
                    titulo: "Drenagem",
                    descricao: "Se houver flutuação, realizar incisão para drenagem do abscesso."
                });
                
                passos.unshift({
                    titulo: "Medicação Sistêmica",
                    descricao: "Prescrição de antibióticos (Amoxicilina 500mg, 8/8h por 7 dias) e analgésicos/anti-inflamatórios."
                });
            }
            
            return passos;
        }
        
        function exibirResultados(diagnosticoPulpar, diagnosticoPeriapical, recomendacoes, passosTratamento, dados) {
            // Exibir dados do paciente
            const dadosPacienteElement = document.getElementById('dados-paciente');
            dadosPacienteElement.innerHTML = `
                <p><strong>Nome:</strong> ${dados.nome || 'Não informado'}</p>
                <p><strong>Idade:</strong> ${dados.idade || 'Não informada'}</p>
                <p><strong>Dente:</strong> ${dados.dente || 'Não informado'}</p>
                <p><strong>Lesão de Cárie:</strong> ${dados.lesao_carie || 'Não informada'}</p>
                <p><strong>Qualidade do Remanescente:</strong> ${dados.remanescente || 'Não informada'}</p>
            `;
            
            // Exibir diagnóstico pulpar
            const diagnosticoPulparElement = document.getElementById('diagnostico-pulpar');
            
            // Adicionar classificação de polpa viva ou morta
            let classificacaoPolpa = "";
            if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                classificacaoPolpa = "Polpa Morta";
            } else {
                classificacaoPolpa = "Polpa Viva";
            }
            
            diagnosticoPulparElement.innerHTML = `<p><strong>${diagnosticoPulpar}</strong> <span style="background-color: #e3f2fd; padding: 3px 8px; border-radius: 4px; margin-left: 8px; font-size: 0.9em;">${classificacaoPolpa}</span></p>`;
            
            // Exibir escala de dor se presente
            if (dados.presenca_dor === 'sim' && dados.escala_dor) {
                diagnosticoPulparElement.innerHTML += `<p>Escala de dor: <strong>${dados.escala_dor}/10</strong></p>`;
            }
            
            diagnosticoPulparElement.innerHTML += `<p>Baseado nos seguintes achados clínicos:</p>`;
            diagnosticoPulparElement.innerHTML += `<ul>`;
            
            if (dados.presenca_dor === 'sim') {
                diagnosticoPulparElement.innerHTML += `<li>Presença de dor</li>`;
                if (dados.dor_espontanea === 'sim') {
                    diagnosticoPulparElement.innerHTML += `<li>Dor espontânea</li>`;
                }
                if (dados.duracao_dor) {
                    diagnosticoPulparElement.innerHTML += `<li>Duração da dor: ${dados.duracao_dor}</li>`;
                }
            } else {
                diagnosticoPulparElement.innerHTML += `<li>Ausência de dor</li>`;
            }
            
            if (dados.teste_frio) {
                let testeFrioTexto = formatarTesteTérmico(dados.teste_frio);
                if (dados.intensidade_frio && (dados.teste_frio === 'positivo_normal' || dados.teste_frio === 'positivo_exacerbado')) {
                    testeFrioTexto += ` (Intensidade: ${dados.intensidade_frio})`;
                }
                if (dados.declinio_frio && dados.teste_frio === 'positivo_exacerbado') {
                    let declinioTexto = "";
                    if (dados.declinio_frio === 'rapido') declinioTexto = "declínio rápido";
                    else if (dados.declinio_frio === 'lento') declinioTexto = "declínio lento";
                    else if (dados.declinio_frio === 'diminui') declinioTexto = "diminui a dor";
                    testeFrioTexto += `, ${declinioTexto}`;
                }
                diagnosticoPulparElement.innerHTML += `<li>Teste ao frio: ${testeFrioTexto}</li>`;
            }
            
            if (dados.teste_calor) {
                let testeCalorTexto = formatarTesteTérmico(dados.teste_calor);
                if (dados.intensidade_calor && (dados.teste_calor === 'positivo_normal' || dados.teste_calor === 'positivo_exacerbado')) {
                    testeCalorTexto += ` (Intensidade: ${dados.intensidade_calor})`;
                }
                if (dados.declinio_calor && dados.teste_calor === 'positivo_exacerbado') {
                    let declinioTexto = "";
                    if (dados.declinio_calor === 'rapido') declinioTexto = "declínio rápido";
                    else if (dados.declinio_calor === 'lento') declinioTexto = "declínio lento";
                    else if (dados.declinio_calor === 'diminui') declinioTexto = "diminui a dor";
                    testeCalorTexto += `, ${declinioTexto}`;
                }
                diagnosticoPulparElement.innerHTML += `<li>Teste ao calor: ${testeCalorTexto}</li>`;
            }
            
            diagnosticoPulparElement.innerHTML += `</ul>`;
            
            // Exibir diagnóstico periapical
            const diagnosticoPeriapicalElement = document.getElementById('diagnostico-periapical');
            diagnosticoPeriapicalElement.innerHTML = `<p><strong>${diagnosticoPeriapical}</strong></p>`;
            diagnosticoPeriapicalElement.innerHTML += `<p>Baseado nos seguintes achados clínicos:</p>`;
            diagnosticoPeriapicalElement.innerHTML += `<ul>`;
            
            if (dados.percussao_vertical) {
                let percussaoVerticalTexto = dados.percussao_vertical === 'positivo' ? 'Sensível' : 'Normal';
                if (dados.intensidade_percussao_vertical && dados.percussao_vertical === 'positivo') {
                    percussaoVerticalTexto += ` (Intensidade: ${dados.intensidade_percussao_vertical})`;
                }
                diagnosticoPeriapicalElement.innerHTML += `<li>Percussão vertical: ${percussaoVerticalTexto}</li>`;
            }
            
            if (dados.percussao_horizontal) {
                let percussaoHorizontalTexto = dados.percussao_horizontal === 'positivo' ? 'Sensível' : 'Normal';
                if (dados.intensidade_percussao_horizontal && dados.percussao_horizontal === 'positivo') {
                    percussaoHorizontalTexto += ` (Intensidade: ${dados.intensidade_percussao_horizontal})`;
                }
                diagnosticoPeriapicalElement.innerHTML += `<li>Percussão horizontal: ${percussaoHorizontalTexto}</li>`;
            }
            
            if (dados.lesao_periapical) {
                diagnosticoPeriapicalElement.innerHTML += `<li>Lesão periapical: ${formatarLesaoPeriapical(dados.lesao_periapical)}</li>`;
            }
            
            if (dados.lamina_dura) {
                diagnosticoPeriapicalElement.innerHTML += `<li>Lâmina dura: ${dados.lamina_dura === 'rompida' ? 'Rompida' : 'Íntegra'}</li>`;
            }
            
            if (dados.fistula === 'sim') {
                diagnosticoPeriapicalElement.innerHTML += `<li>Presença de fístula</li>`;
            }
            
            if (dados.edema === 'sim') {
                diagnosticoPeriapicalElement.innerHTML += `<li>Presença de edema</li>`;
            }
            
            if (dados.dente_extruido === 'sim') {
                diagnosticoPeriapicalElement.innerHTML += `<li>Sensação de dente extruído</li>`;
            }
            
            diagnosticoPeriapicalElement.innerHTML += `</ul>`;
            
            // Exibir recomendações de tratamento
            const recomendacoesElement = document.getElementById('recomendacoes');
            recomendacoesElement.innerHTML = `<ul>`;
            recomendacoes.forEach(recomendacao => {
                recomendacoesElement.innerHTML += `<li>${recomendacao}</li>`;
            });
            recomendacoesElement.innerHTML += `</ul>`;
            
            // Exibir informações sobre medicação intracanal com base no diagnóstico pulpar
            const medicacaoIntracanal = document.getElementById('medicacao-intracanal');
            const medicacaoIntracanalCard = document.getElementById('medicacao-intracanal-card');
            
            // Determinar se é polpa viva ou morta para exibir a medicação intracanal apropriada
            let tipoPolpa = null;
            if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["necrose_pulpar"]) {
                tipoPolpa = "polpa_morta";
                medicacaoIntracanalCard.style.display = 'block';
            } else if (diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_sintomatica"] || 
                       diagnosticoPulpar === DIAGNOSTICOS_PULPARES["pulpite_irreversivel_assintomatica"]) {
                tipoPolpa = "polpa_viva";
                medicacaoIntracanalCard.style.display = 'block';
            } else {
                medicacaoIntracanalCard.style.display = 'none';
            }
            
            if (tipoPolpa) {
                const infoMIC = MEDICACAO_INTRACANAL[tipoPolpa];
                
                medicacaoIntracanal.innerHTML = `
                    <h4>${infoMIC.titulo}</h4>
                    <p>${infoMIC.descricao}</p>
                    <h4>Medicações Recomendadas:</h4>
                `;
                
                infoMIC.medicacoes.forEach(med => {
                    medicacaoIntracanal.innerHTML += `
                        <div style="margin-top: 15px; padding: 10px; background-color: #f0f7ff; border-radius: 5px;">
                            <h5 style="color: var(--primary-dark); margin-bottom: 8px;">${med.nome}</h5>
                            <p><strong>Indicação:</strong> ${med.indicacao}</p>
                            <p><strong>Modo de Uso:</strong> ${med.modo_uso}</p>
                            <p><strong>Tempo de Permanência:</strong> ${med.tempo}</p>
                            <p><strong>Observações:</strong> ${med.observacoes}</p>
                        </div>
                    `;
                });
                
                medicacaoIntracanal.innerHTML += `
                    <h4 style="margin-top: 15px;">Técnica de Aplicação:</h4>
                    <p style="white-space: pre-line;">${infoMIC.tecnica_aplicacao}</p>
                `;
            }
            
            // Exibir passos do tratamento
            const passosTratamentoElement = document.getElementById('passos-tratamento');
            passosTratamentoElement.innerHTML = `<ol>`;
            passosTratamento.forEach(passo => {
                passosTratamentoElement.innerHTML += `
                    <li>
                        <strong>${passo.titulo}</strong>
                        <p>${passo.descricao}</p>
                    </li>
                `;
            });
            passosTratamentoElement.innerHTML += `</ol>`;
            
            // Mostrar ou ocultar cards de diagnóstico com base na seleção
            const diagnosticoPulparCard = document.getElementById('diagnostico-pulpar-card');
            const diagnosticoPeriapicalCard = document.getElementById('diagnostico-periapical-card');
            
            // Mostrar ambos inicialmente
            diagnosticoPulparCard.style.display = 'block';
            diagnosticoPeriapicalCard.style.display = 'block';
        }
        
        function gerarDiagnostico() {
            // Coletar dados do formulário
            const dados = coletarDados();
            
            // Determinar diagnósticos
            const diagnosticoPulpar = determinarDiagnosticoPulpar(dados);
            const diagnosticoPeriapical = determinarDiagnosticoPeriapical(dados);
            
            // Gerar recomendações e passos do tratamento
            const recomendacoes = gerarRecomendacoesTratamento(diagnosticoPulpar, diagnosticoPeriapical, dados);
            const passosTratamento = gerarPassosTratamento(diagnosticoPulpar, diagnosticoPeriapical);
            
            // Exibir resultados
            exibirResultados(diagnosticoPulpar, diagnosticoPeriapical, recomendacoes, passosTratamento, dados);
            
            // Mostrar tela de resultados
            showScreen('result-screen');
        }
        
        function imprimirResultados() {
            window.print();
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Mostrar/ocultar detalhes da dor
            const radiosDor = document.querySelectorAll('input[name="presenca_dor"]');
            radiosDor.forEach(radio => {
                radio.addEventListener('change', function() {
                    const dorDetails = document.getElementById('dor-details');
                    const escalaDorContainer = document.getElementById('escala-dor-container');
                    if (this.value === 'sim') {
                        dorDetails.style.display = 'block';
                        escalaDorContainer.style.display = 'block';
                    } else {
                        dorDetails.style.display = 'none';
                        escalaDorContainer.style.display = 'none';
                    }
                });
            });
            
            // Atualizar valor da escala de dor
            const escalaDor = document.getElementById('escala-dor');
            const escalaDorValor = document.getElementById('escala-dor-valor');
            escalaDor.addEventListener('input', function() {
                escalaDorValor.textContent = this.value;
            });
            
            // Mostrar/ocultar opções de declínio e intensidade para testes térmicos
            const radiosFrio = document.querySelectorAll('input[name="teste_frio"]');
            radiosFrio.forEach(radio => {
                radio.addEventListener('change', function() {
                    const declinioFrioContainer = document.getElementById('declinio-frio-container');
                    const intensidadeFrioContainer = document.getElementById('intensidade-frio-container');
                    
                    if (this.value === 'positivo') {
                        declinioFrioContainer.style.display = 'block';
                        intensidadeFrioContainer.style.display = 'block';
                    } else {
                        declinioFrioContainer.style.display = 'none';
                        intensidadeFrioContainer.style.display = 'none';
                    }
                });
            });
            
            // Mostrar/ocultar opções de intensidade para teste ao calor
            const radiosCalor = document.querySelectorAll('input[name="teste_calor"]');
            radiosCalor.forEach(radio => {
                radio.addEventListener('change', function() {
                    const declinioCalorContainer = document.getElementById('declinio-calor-container');
                    const intensidadeCalorContainer = document.getElementById('intensidade-calor-container');
                    
                    if (this.value === 'positivo') {
                        declinioCalorContainer.style.display = 'block';
                        intensidadeCalorContainer.style.display = 'block';
                    } else {
                        declinioCalorContainer.style.display = 'none';
                        intensidadeCalorContainer.style.display = 'none';
                    }
                });
            });
            
            // Mostrar/ocultar opções de intensidade para percussão vertical
            const radiosPercussaoVertical = document.querySelectorAll('input[name="percussao_vertical"]');
            radiosPercussaoVertical.forEach(radio => {
                radio.addEventListener('change', function() {
                    const intensidadePercussaoVerticalContainer = document.getElementById('intensidade-percussao-vertical-container');
                    
                    if (this.value === 'positivo') {
                        intensidadePercussaoVerticalContainer.style.display = 'block';
                    } else {
                        intensidadePercussaoVerticalContainer.style.display = 'none';
                    }
                });
            });
            
            // Mostrar/ocultar opções de intensidade para percussão horizontal
            const radiosPercussaoHorizontal = document.querySelectorAll('input[name="percussao_horizontal"]');
            radiosPercussaoHorizontal.forEach(radio => {
                radio.addEventListener('change', function() {
                    const intensidadePercussaoHorizontalContainer = document.getElementById('intensidade-percussao-horizontal-container');
                    
                    if (this.value === 'positivo') {
                        intensidadePercussaoHorizontalContainer.style.display = 'block';
                    } else {
                        intensidadePercussaoHorizontalContainer.style.display = 'none';
                    }
                });
            });
            
            // Removendo código duplicado para teste de calor que estava causando conflito
            
        });
    </script>
</body>
</html>
